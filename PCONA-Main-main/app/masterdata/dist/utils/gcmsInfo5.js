var that;sap.ui.define(["sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","sap/ui/core/util/Export","sap/ui/core/util/ExportTypeCSV","sap/ui/export/Spreadsheet","sap/m/BusyDialog","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/Token","sap/ui/model/Sorter"],function(e,t,r,a,o,i,n,l,s,d,u,_){"use strict";that=this;return{storeView_5:function(e,t){this.currentView=e;that.GlbCurrView=t;that.GlbCurrView.busy=new n},handle5SelectionChange_util:function(e){var t=e.getParameter("changedItem"),r=e.getParameter("selected"),a=t.getBindingContext("columndataInfo_5");a.oModel.setProperty(a.sPath+"/visible",r);a.oModel.refresh(true)},onRead_5TableData:function(){var e=this.currentView.getOwnerComponent().getModel("masterDataGlobalModel");var t=new sap.ui.model.json.JSONModel;e.callFunction("/userInfo",{success:function(e){t.setData(e.userInfo.scopes);that.getView().setModel(t,"userModel");that.userLoggedIn=e.userInfo.user}.bind(that),error:function(e){}.bind(that)});e.read("/zmm_m12_info_5",{success:function(e){var t=that.getView().getModel("userModel").getData();if(t.TISAdmin===true){var r=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"MM-dd-yyyy"});var a=r.format(new Date);for(var o=0;o<e.results.length;o++){e.results[o].created_on=r.format(e.results[o].created_on);e.results[o].changed_on=r.format(e.results[o].changed_on);e.results[o].change_time=new Date(e.results[o].change_time.ms).toISOString().slice(11,19)}that.GlbCurrView.getView().setModel(new sap.ui.model.json.JSONModel(e.results),"globalMainData_Info5");that.GlbCurrView.getView().setModel(new sap.ui.model.json.JSONModel(e.results),"Info_5_Model")}else{that.getView().setModel([],"globalMainData_Info5")}},error:function(e){that.GlbCurrView.busy.close()}})},setMaxDate_City:function(){var e=new Date;var t=e.setDate(e.getDate());t=new Date(t).getDate();t=t.toString().padStart(2,"0");var r=e.getMonth()+1;r=r.toString().padStart(2,"0");var a=e.getFullYear().toString();that.GlbCurrView.completeDate=r+"-"+t+"-"+a;const o=new Date(a,r-1,t);var i=this.currentView.getView().byId("id_datePicker_7");i.setMaxDate(o)},setMaxDate_City2:function(){var e=new Date;var t=e.setDate(e.getDate());t=new Date(t).getDate();t=t.toString().padStart(2,"0");var r=e.getMonth()+1;r=r.toString().padStart(2,"0");var a=e.getFullYear().toString();that.GlbCurrView.completeDate1=r+"-"+t+"-"+a;const o=new Date(a,r-1,t);var i=this.currentView.getView().byId("id_datePicker_8");i.setMaxDate(o)},handleChangeCreateDateInfo5Util:function(e){that.startDate=e.mParameters.value.substr(0,10);that.endDate=e.mParameters.value.substr(13,20)},handleChangeDateInfo5Util:function(e){that.startDate1=e.mParameters.value.substr(0,10);that.endDate1=e.mParameters.value.substr(13,20)},VisibleColumns_5:function(){var t=jQuery.sap.getResourcePath("masterdata/model")+"/gcmsInfo5Columns.json";var r=new e;r.loadData(t).then(function(){this.currentView.getView().setModel(r,"columndataInfo_5");this.currentView.getView().byId("id_showHideColumns5").setSelectedKeys(["sales_company_code","unified_model_number","suplier_code","package_type_code","price_available_date","created_on","changed_on"])}.bind(this))},onOpensales_company_codeFragment_Util_Info5:function(t){if(this.currentView.osales_company_code_Info5_Frag){this.currentView.osales_company_code_Info5_Frag=undefined}if(!this.currentView.osales_company_code_Info5_Frag){that.GlbCurrView.busy.open();this.currentView.osales_company_code_Info5_Frag=sap.ui.xmlfragment("masterdata.fragments.dialogs.Info_5.sales_company_code_Info5",that.GlbCurrView);this.currentView.getView().addDependent(that.GlbCurrView.osales_company_code_Info5_Frag);var r=that.GlbCurrView.getView().getModel("globalMainData_Info5").oData;var a={};var o=r;var i=[];for(var n,l=0;n=o[l++];){var s=n.sales_company_code;if(!(s in a)){a[s]=1;i.push({sales_company_code:s})}}var d=new e(i);this.currentView.getView().setModel(d,"sales_company_codeInfo5GlobalData");this.currentView.osales_company_code_Info5_Frag.setModel(d,"sales_company_codeInfo5Data")}that.GlbCurrView.busy.close();this.currentView.osales_company_code_Info5_Frag.open()},onSelectionsales_company_code_Util_Info5:function(e){var t=e.getParameter("selectedContexts");var r=this.currentView.getView().byId("id_Info5_SalesCompanyCode");var a=[];var o=this.currentView.getView().getModel("sales_company_codeInfo5GlobalData");for(var i=0;i<t.length;i++){a.push(t[i])}that.GlbCurrView.osales_company_codeInfo5Model=[];$.each(a,function(e,t){if($.inArray(t.ProductId,that.GlbCurrView.osales_company_codeInfo5Model)===-1)that.GlbCurrView.osales_company_codeInfo5Model.push(t.getObject())});o.setProperty("/tokens1",that.GlbCurrView.osales_company_codeInfo5Model);var n;n=r.getTokens()[0];if(!n){n=new u({text:"{sales_company_code}",key:"{sales_company_code}"})}else{n=r.getTokens()[0].clone()}that.GlbCurrView.osales_company_codeInfo5Model.forEach(function(e){r.addToken(new u({text:e.sales_company_code}))})},onSearchsales_company_code_Util_Info5:function(e){var t=e.getParameter("value");var r=new l("sales_company_code",sap.ui.model.FilterOperator.Contains,t);var a=e.getParameter("itemsBinding");a.filter([r])},onOpenunified_model_numberFragment_Util_Info5:function(t){if(this.currentView.ounified_model_number_Info5_Frag){this.currentView.ounified_model_number_Info5_Frag=undefined}if(!this.currentView.ounified_model_number_Info5_Frag){that.GlbCurrView.busy.open();this.currentView.ounified_model_number_Info5_Frag=sap.ui.xmlfragment("masterdata.fragments.dialogs.Info_5.unified_model_number_Info5",that.GlbCurrView);this.currentView.getView().addDependent(that.GlbCurrView.ounified_model_number_Info5_Frag);var r=that.GlbCurrView.getView().getModel("globalMainData_Info5").oData;var a={};var o=r;var i=[];for(var n,l=0;n=o[l++];){var s=n.unified_model_number;if(!(s in a)){a[s]=1;i.push({unified_model_number:s})}}var d=new e(i);this.currentView.getView().setModel(d,"unified_model_numberInfo5GlobalData");this.currentView.ounified_model_number_Info5_Frag.setModel(d,"unified_model_numberInfo5Data")}that.GlbCurrView.busy.close();this.currentView.ounified_model_number_Info5_Frag.open()},onSelectionunified_model_number_Util_Info5:function(e){var t=e.getParameter("selectedContexts");var r=this.currentView.getView().byId("id_Info5_unified_model_number");var a=[];var o=this.currentView.getView().getModel("unified_model_numberInfo5GlobalData");for(var i=0;i<t.length;i++){a.push(t[i])}that.GlbCurrView.ounified_model_numberInfo5Model=[];$.each(a,function(e,t){if($.inArray(t.ProductId,that.GlbCurrView.ounified_model_numberInfo5Model)===-1)that.GlbCurrView.ounified_model_numberInfo5Model.push(t.getObject())});o.setProperty("/tokens1",that.GlbCurrView.ounified_model_numberInfo5Model);var n;n=r.getTokens()[0];if(!n){n=new u({text:"{unified_model_number}",key:"{unified_model_number}"})}else{n=r.getTokens()[0].clone()}that.GlbCurrView.ounified_model_numberInfo5Model.forEach(function(e){r.addToken(new u({text:e.unified_model_number}))})},onSearchunified_model_number_Util_Info5:function(e){var t=e.getParameter("value");var r=new l("unified_model_number",sap.ui.model.FilterOperator.Contains,t);var a=e.getParameter("itemsBinding");a.filter([r])},onOpensuplier_codeFragment_Util_Info5:function(t){if(this.currentView.osuplier_code_Info5_Frag){this.currentView.osuplier_code_Info5_Frag=undefined}if(!this.currentView.osuplier_code_Info5_Frag){that.GlbCurrView.busy.open();this.currentView.osuplier_code_Info5_Frag=sap.ui.xmlfragment("masterdata.fragments.dialogs.Info_5.suplier_code_Info5",that.GlbCurrView);this.currentView.getView().addDependent(that.GlbCurrView.osuplier_code_Info5_Frag);var r=that.GlbCurrView.getView().getModel("globalMainData_Info5").oData;var a={};var o=r;var i=[];for(var n,l=0;n=o[l++];){var s=n.suplier_code;if(!(s in a)){a[s]=1;i.push({suplier_code:s})}}var d=new e(i);this.currentView.getView().setModel(d,"suplier_codeInfo5GlobalData");this.currentView.osuplier_code_Info5_Frag.setModel(d,"suplier_codeInfo5Data")}that.GlbCurrView.busy.close();this.currentView.osuplier_code_Info5_Frag.open()},onSelectionsuplier_code_Util_Info5:function(e){var t=e.getParameter("selectedContexts");var r=this.currentView.getView().byId("id_Info5_suplier_code");var a=[];var o=this.currentView.getView().getModel("suplier_codeInfo5GlobalData");for(var i=0;i<t.length;i++){a.push(t[i])}that.GlbCurrView.osuplier_codeInfo5Model=[];$.each(a,function(e,t){if($.inArray(t.ProductId,that.GlbCurrView.osuplier_codeInfo5Model)===-1)that.GlbCurrView.osuplier_codeInfo5Model.push(t.getObject())});o.setProperty("/tokens1",that.GlbCurrView.osuplier_codeInfo5Model);var n;n=r.getTokens()[0];if(!n){n=new u({text:"{suplier_code}",key:"{suplier_code}"})}else{n=r.getTokens()[0].clone()}that.GlbCurrView.osuplier_codeInfo5Model.forEach(function(e){r.addToken(new u({text:e.suplier_code}))})},onSearchsuplier_code_Util_Info5:function(e){var t=e.getParameter("value");var r=new l("suplier_code",sap.ui.model.FilterOperator.Contains,t);var a=e.getParameter("itemsBinding");a.filter([r])},onCloseDialog_Util_Info5:function(e){if(that.GlbCurrView.osales_company_code_Info5_Frag){that.GlbCurrView.osales_company_code_Info5_Frag=undefined;that.GlbCurrView.osales_company_code_Info5_Frag=null}if(that.GlbCurrView.ounified_model_number_Info5_Frag){that.GlbCurrView.ounified_model_number_Info5_Frag=undefined;that.GlbCurrView.ounified_model_number_Info5_Frag=null}if(that.GlbCurrView.osuplier_code_Info5_Frag){that.GlbCurrView.osuplier_code_Info5_Frag=undefined;that.GlbCurrView.osuplier_code_Info5_Frag=null}},on5Export:function(e){var t=new sap.ui.model.json.JSONModel(that.GlbCurrView.getView().getModel("Info_5_Model").oData);var r=[{label:"Sales Company Code",property:"sales_company_code"},{label:"Unified Model Number",property:"unified_model_number"},{label:"Supplier Code",property:"supplier_code"},{label:"Package Type Code",property:"package_type_code"},{label:"Price Available Date",property:"price_available_date"},{label:"Price Validity Date",property:"price_validity_date"},{label:"End User Code",property:"end_user_code"},{label:"Sales Trade Term Code",property:"sales_trade_term_code"},{label:"Sales Term Rate Id",property:"sales_term_rate_id"},{label:"Sales Currency Code",property:"sales_currency_code"},{label:"Quantity Per Package",property:"quantity_per_package"},{label:"Quantity Per Package Per Decimal",property:"quantity_per_package_per_decimal"},{label:"Net Weight",property:"net_weight"},{label:"Gross Weight",property:"gross_weight"},{label:"Measurement",property:"measurement"},{label:"Width",property:"width"},{label:"Depth",property:"depth"},{label:"Height",property:"height"},{label:"Payer Code",property:"payer_code"},{label:"Sales Unit Price Basis",property:"sales_unit_price_basis"},{label:"Sales Unit Price Basis Dec",property:"sales_unit_price_basis_dec"},{label:"Sales Unit Price Unit Code",property:"sales_unit_price_unit_code"},{label:"Sales Unit Price",property:"sales_unit_price"},{label:"Sales Unit Price Exchange Rate",property:"sales_unit_price_exchange_rate"},{label:"Price Available Date 2",property:"price_available_date_2"},{label:"Price Validity Date 2",property:"price_validity_date_2"},{label:"Sales Unit Price 2",property:"sales_unit_price_2"},{label:"Sales Unit Price Exchange Rate 2",property:"sales_unit_price_exchange_rate_2"},{label:"Tent Price Mark 1",property:"tent_price_mark_1"},{label:"Tent Price Mark 2",property:"tent_price_mark_2"},{label:"Route",property:"route"},{label:"Plu Supplier Perm Id",property:"plu_supplier_perm_id"},{label:"Filler",property:"filler"},{label:"Revised Flag",property:"revised_flag"},{label:"Filler 2",property:"filler_2"},{label:"Delete Indicator",property:"delete_indicator"},{label:"Created On",property:"created_on"},{label:"Changed On",property:"changed_on"},{label:"Change Time",property:"change_time"},{label:"Actual Message Issued Date",property:"actual_message_issued_date"}];var a={workbook:{columns:r,context:{sheetName:"GCMS_INFO_5"}},dataSource:t.getData(),fileName:"GCMS_INFO_5.xlsx"};var o=new sap.ui.export.Spreadsheet(a);o.build().then(function(){o.destroy()})},onGoToReport_Util_Info5:function(){that.GlbCurrView.busy.open();var t=this.currentView.getView().byId("id_Info5_SalesCompanyCode").getTokens();that.GlbCurrView.sInfo5_SalesCompanyCode_TokensValues=t.map(function(e){return e.getText()}).join(",");var r=this.currentView.getView().byId("id_Info5_unified_model_number").getTokens();that.GlbCurrView.sInfo5_unified_model_number_TokensValues=r.map(function(e){return e.getText()}).join(",");var a=this.currentView.getView().byId("id_Info5_suplier_code").getTokens();that.GlbCurrView.sInfo5_suplier_code_TokensValues=a.map(function(e){return e.getText()}).join(",");var o=[];if(that.GlbCurrView.sInfo5_suplier_code_TokensValues!==""){var i=that.GlbCurrView.sInfo5_suplier_code_TokensValues.split(",");if(i.length>0){$.each(i,function(e,t){o.push(new sap.ui.model.Filter("suplier_code",sap.ui.model.FilterOperator.Contains,t))})}}if(that.GlbCurrView.sInfo5_unified_model_number_TokensValues!==""){var n=that.GlbCurrView.sInfo5_unified_model_number_TokensValues.split(",");if(n.length>0){$.each(n,function(e,t){o.push(new sap.ui.model.Filter("unified_model_number",sap.ui.model.FilterOperator.Contains,t))})}}if(that.GlbCurrView.sInfo5_SalesCompanyCode_TokensValues!==""){var l=that.GlbCurrView.sInfo5_SalesCompanyCode_TokensValues.split(",");if(l.length>0){$.each(l,function(e,t){o.push(new sap.ui.model.Filter("sales_company_code",sap.ui.model.FilterOperator.Contains,t))})}}if(that.startDate!==""&&that.endDate!==""||that.startDate!==undefined&&that.endDate!==undefined){var s=that.startDate;var d=that.endDate;if(s){o.push(new sap.ui.model.Filter("created_on",sap.ui.model.FilterOperator.BT,s,d))}}if(that.startDate1!==""&&that.endDate1!==""||that.startDate1!==undefined&&that.endDate1!==undefined){var u=that.startDate1;var _=that.endDate1;if(u){o.push(new sap.ui.model.Filter("changed_on",sap.ui.model.FilterOperator.BT,u,_))}}that.GlbCurrView.tableMainModelfiltereddata=undefined;that.GlbCurrView.tableMainModelfiltereddata=new e(that.GlbCurrView.getView().getModel("globalMainData_Info5").oData);that.GlbCurrView.getView().setModel(that.GlbCurrView.tableMainModelfiltereddata,"Info_5_Model");this.currentView.getView().byId("idInfo_5_Table").getBinding("items").filter(o);that.GlbCurrView.filteredData=true;that.GlbCurrView.filteredDataToExport=[];var c=this.currentView.getView().byId("idInfo_5_Table").getBinding("items").aIndices.length;that.GlbCurrView.filteredIndices=this.currentView.getView().byId("idInfo_5_Table").getBinding("items").aIndices;for(var p=0;p<c;p++){that.GlbCurrView.filteredDataToExport.push(that.GlbCurrView.tableMainModelfiltereddata.oData[that.GlbCurrView.filteredIndices[p]])}var f=new e(that.GlbCurrView.filteredDataToExport);that.GlbCurrView.getView().setModel(f,"Info_5_Model");that.GlbCurrView.busy.close()},handleInfo_5_SortButtonPressedUtil:function(e){if(this.currentView.oInfo_5_SortFrag){this.currentView.oInfo_5_SortFrag=undefined}if(!this.currentView.oInfo_5_SortFrag){that.GlbCurrView.busy.open();this.currentView.oInfo_5_SortFrag=sap.ui.xmlfragment("masterdata.fragments.dialogs.Info_5.ascAndDscSort_Info5",that);this.currentView.getView().addDependent(that.GlbCurrView.oInfo_5_SortFrag)}that.GlbCurrView.busy.close();this.currentView.oInfo_5_SortFrag.open()},Info_5_handleSortDialogConfirmUtil:function(e){var t=this.currentView.byId("idInfo_5_Table"),r=e.getParameters(),a=t.getBinding("items"),o,i,n=[];o=r.sortItem.getKey();i=r.sortDescending;n.push(new _(o,i));a.sort(n)},onClear5Util:function(e){this.currentView.getView().byId("id_Info5_SalesCompanyCode").setTokens([]);this.currentView.getView().byId("id_Info5_unified_model_number").setTokens([]);this.currentView.getView().byId("id_Info5_suplier_code").setTokens([]);this.currentView.getView().byId("id_datePicker_7").setValue("");this.currentView.getView().byId("id_datePicker_8").setValue("");var t=new sap.ui.model.json.JSONModel;that.getView().setModel(t,"Info_5_Model");that.GlbCurrView.completeDate="";that.GlbCurrView.completeDate1="";that.startDate="";that.endDate="";that.startDate1="";that.endDate1=""}}});